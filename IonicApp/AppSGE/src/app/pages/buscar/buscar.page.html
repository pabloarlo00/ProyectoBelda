<app-header titulo="Buscar Noticias"></app-header>

<ion-content [fullscreen]="true">
  <ion-toolbar color="primary">
    <ion-searchbar
      placeholder="Buscar por tÃ­tulo o autor"
      (ionClear)="clear()"
      (ionInput)="filter($event)"
      mode="ios"
    >
    </ion-searchbar>
  </ion-toolbar>

  <div class="container-fluid py-3">
    @for (item of resultados; track item._id) {
    <ion-card class="mb-4 shadow-sm border-0 mx-0">
      @if (item.imagenes && item.imagenes.length > 0) {
      <swiper-container pagination="true" class="bg-dark" style="height: 250px">
        @for (foto of item.imagenes; track $index) {
        <swiper-slide>
          <img
            [src]="foto"
            style="
              width: 100%;
              height: 250px;
              object-fit: cover;
              display: block;
            "
          />
        </swiper-slide>
        }
      </swiper-container>
      }

      <ion-card-header>
        <ion-grid class="p-0">
          <ion-row class="ion-align-items-center">
            <ion-col
              ><ion-badge color="secondary"
                >{{ item.seccion }}</ion-badge
              ></ion-col
            >
            <ion-col class="ion-text-end"
              ><ion-note class="small"
                >{{ item.fecha | date:'dd/MM/yyyy' }}</ion-note
              ></ion-col
            >
          </ion-row>
        </ion-grid>
        <ion-card-title class="fw-bold">{{ item.titulo }}</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <div class="mt-3 pt-2 border-top">
          <ion-text color="medium"
            >Por: <strong class="text-dark">{{ item.autor }}</strong></ion-text
          >
        </div>
      </ion-card-content>
    </ion-card>
    } @empty {
    <div class="ion-text-center ion-padding mt-5 text-muted">
      <ion-icon name="search-outline" style="font-size: 48px"></ion-icon>
      <p>No hay resultados para mostrar</p>
    </div>
    }
  </div>
</ion-content>
